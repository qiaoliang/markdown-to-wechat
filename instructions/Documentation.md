This doc is the system design doc.